<html>
  <head>
    <title>Form Validation</title>
    <style>
      form {
        margin: 200px;
      }
      button {
        cursor: pointer;
      }
      .error {
        color: red;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <form action="/js/17form-validation.html" onsubmit="return validate();">
      <label for="name">Name: </label>
      <input type="text" id="name" name="name" placeholder="John Doe" />
      <p class="error" id="name_error">&nbsp;</p>

      <label for="username">Username</label>
      <input
        type="text"
        id="username"
        name="username"
        placeholder="john-doe-123"
      />
      <p class="error" id="username_error">&nbsp;</p>

      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="johndoe@email.com"
      />
      <p class="error" id="email_error">&nbsp;</p>

      <label for="password">Password</label>
      <input
        type="password"
        id="password"
        name="password"
        placeholder="********"
      />
      <p class="error" id="password_error">&nbsp;</p>

      <button type="submit">Submit</button>
    </form>

    <script>
      function validate() {
        resetError();

        const name_tag = document.getElementById("name");
        const username_tag = document.getElementById("username");
        const email_tag = document.getElementById("email");
        const password_tag = document.getElementById("password");

        const name = name_tag.value.trim();
        const username = username_tag.value.trim();
        const email = email_tag.value.trim();
        const password = password_tag.value.trim();

        let isErrorDetected = false;

        if (!name || !username || !email || !password) {
          if (!name) showError("name", "Name is required!");
          if (!username) showError("username", "Username is required!");
          if (!email) showError("email", "Email is required");
          if (!password) showError("password", "Password is required");

          return false;
        }

        if (!/\w/.test(name)) {
          showError("name", "Name is Invalid!");
          isErrorDetected = true;
        }
        if (!/\w|-/.test(username)) {
          showError("username", "Username is Invalid!");
          isErrorDetected = true;
        }

        if (!/\w{2,}|@\w{2,}.\w{2,}/.test(email)) {
          showError("email", "Email is Invalid");
          isErrorDetected = true;
        }
        if (!/\w{8,}/.test(password)) {
          showError("password", "Password is Invalid");
          isErrorDetected = true;
        }

        if (isErrorDetected) return false;

        return true;
      }

      function showError(error_tag_name, message) {
        switch (error_tag_name) {
          case "name":
            document.getElementById("name_error").textContent = message;
            break;

          case "username":
            document.getElementById("username_error").textContent = message;
            break;

          case "email":
            document.getElementById("email_error").textContent = message;
            break;

          case "password":
            document.getElementById("password_error").textContent = message;
            break;

          default:
            console.log("Something went wrong!");
            break;
        }
      }

      function resetError(errorTag) {}
      function resetError() {
        const errorTags = document.querySelectorAll(".error");
        for (const errorTag of errorTags) {
          errorTag.textContent = "";
        }
      }
    </script>
  </body>
</html>
