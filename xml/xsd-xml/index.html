<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Fetcher</title>
  </head>
  <body>
    <h2>Product Fetcher</h2>
    <button id="fetchProduct">Fetch Product</button>
    <div id="productDetails"></div>

    <script>
      const btn = document.getElementById("fetchProduct");
      const box = document.getElementById("productDetails");

      btn.addEventListener("click", fetchProduct);

      function fetchProduct() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = () => onFetch(xhr);
        xhr.open("GET", "get-product.php", true);
        xhr.send();
      }

      function onFetch(xhr) {
        try {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              var xmlResponse = xhr.responseXML;
              var product = xmlResponse.getElementsByTagName("product")[0];
              var productName =
                product.getElementsByTagName("name")[0].textContent;
              var productPrice =
                product.getElementsByTagName("price")[0].textContent;
              var productDescription =
                product.getElementsByTagName("description")[0].textContent;

              var productHTML = "<h3>" + productName + "</h3>";
              productHTML +=
                "<p><strong>Price:</strong> $" + productPrice + "</p>";
              productHTML +=
                "<p><strong>Description:</strong> " +
                productDescription +
                "</p>";

              box.innerHTML = productHTML;
            }
          }
        } catch (error) {
          var xmlError = xhr.responseText;
          box.innerHTML = `<p style='color: red;'>${xmlError}</p>`;
        }
      }
    </script>
  </body>
</html>
